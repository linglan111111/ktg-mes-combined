(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f381c878","chunk-9b2d6320","chunk-2d0b61c3","chunk-2d212fd7","chunk-2d2254bf","chunk-2d0b64bc","chunk-2d0ba946"],{"0db0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("div",{staticStyle:{display:"flex","flex-direction":"column"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button-group",[t._l(t.paperTypes,(function(e,a){return[i("el-button",{key:a,attrs:{type:t.curPaperType===a?"primary":"info"},on:{click:function(i){return t.setPaper(a,e)}}},[t._v(" "+t._s(a)+" ")])]})),i("el-popover",{attrs:{title:"设置纸张宽高(mm)",trigger:"click"},model:{value:t.paperPopVisible,callback:function(e){t.paperPopVisible=e},expression:"paperPopVisible"}},[i("div",[i("el-input-number",{staticStyle:{width:"120px","text-align":"center"},attrs:{"controls-position":"right",placeholder:"宽(mm)"},model:{value:t.paperWidth,callback:function(e){t.paperWidth=e},expression:"paperWidth"}}),i("el-input",{staticStyle:{width:"50px","border-left":"0","pointer-events":"none","text-align":"center",backgroundColor:"#fff"},attrs:{placeholder:"~",disabled:""}}),i("el-input-number",{staticStyle:{width:"120px","text-align":"center","border-left":"0"},attrs:{"controls-position":"right",placeholder:"高(mm)"},model:{value:t.paperHeight,callback:function(e){t.paperHeight=e},expression:"paperHeight"}})],1),i("el-button",{staticStyle:{width:"290px","margin-top":"10px"},attrs:{type:"primary"},on:{click:t.otherPaper}},[t._v("确定")]),i("el-button",{attrs:{slot:"reference",type:"other"==t.curPaperType?"primary":""},slot:"reference"},[t._v("自定义纸张")])],1)],2),i("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{min:t.scaleMin,max:t.scaleMax,step:.1,disabled:"",value:(100*t.scaleValue).toFixed(0)+"%",parser:function(t){return t.replace("%","")}}},[i("el-button",{attrs:{slot:"prepend",icon:"el-icon-zoom-out"},on:{click:function(e){return t.changeScale(!1)}},slot:"prepend"}),i("el-button",{attrs:{slot:"append",icon:"el-icon-zoom-in"},on:{click:function(e){return t.changeScale(!0)}},slot:"append"})],1),i("el-button-group",{staticStyle:{"margin-left":"10px"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-printer"},on:{click:function(e){return t.print()}}},[t._v("打印")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-left"},on:{click:function(e){return t.rotatePaper()}}},[t._v("旋转")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-view"},on:{click:t.preView}},[t._v("预览")]),i("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:t.handleSave}},[t._v("保存")]),i("el-popconfirm",{attrs:{title:"是否确认清空?","confirm-button-text":"确定清空"},on:{confirm:t.clearPaper}},[i("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-close"},slot:"reference"},[t._v(" 清空 ")])],1)],1),i("el-radio-group",{staticStyle:{"margin-left":"10px"}},[i("el-radio-button",{attrs:{title:"左对齐"},on:{click:function(e){return t.setElsAlign("left")}}},[i("svg-icon",{attrs:{"icon-class":"alignLeft"}})],1),i("el-radio-button",{attrs:{title:"居中"},on:{click:function(e){return t.setElsAlign("vertical")}}},[i("svg-icon",{attrs:{"icon-class":"alignCenter"}})],1),i("el-radio-button",{attrs:{title:"右对齐"},on:{click:function(e){return t.setElsAlign("right")}}},[i("svg-icon",{attrs:{"icon-class":"alignRight"}})],1),i("el-radio-button",{attrs:{title:"顶部对齐"},on:{click:function(e){return t.setElsAlign("top")}}},[i("svg-icon",{attrs:{"icon-class":"alignTop"}})],1),i("el-radio-button",{attrs:{title:"垂直居中"},on:{click:function(e){return t.setElsAlign("horizontal")}}},[i("svg-icon",{attrs:{"icon-class":"horizontal"}})],1),i("el-radio-button",{attrs:{title:"底部对齐"},on:{click:function(e){return t.setElsAlign("bottom")}}},[i("svg-icon",{attrs:{"icon-class":"alignBottom"}})],1),i("el-radio-button",{attrs:{title:"横向分散"},on:{click:function(e){return t.setElsAlign("distributeHor")}}},[i("svg-icon",{attrs:{"icon-class":"resizeHorizontal"}})],1),i("el-radio-button",{attrs:{title:"纵向分散"},on:{click:function(e){return t.setElsAlign("distributeVer")}}},[i("svg-icon",{attrs:{"icon-class":"resizeVertical"}})],1)],1)],1)]),i("el-row",{attrs:{gutter:8}},[i("el-col",{attrs:{span:4}},[i("el-card",{staticClass:"ep-drag-container"},[i("el-row",[i("el-col",{staticClass:"rect-printElement-types hiprintEpContainer",attrs:{span:24}},[i("el-row",{staticClass:"drag_item_title"},[t._v("基础组件")]),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.text"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"text"}}),i("p",{staticClass:"glyphicon-class"},[t._v("固定文本")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.image"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"picture"}}),i("p",{staticClass:"glyphicon-class"},[t._v("图片")])],1)])])],1),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.longText"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"textarea"}}),i("p",{staticClass:"glyphicon-class"},[t._v("长文")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.date"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"date"}}),i("p",{staticClass:"glyphicon-class"},[t._v("日期时间")])],1)])])],1),i("el-row",{staticClass:"drag_item_title"},[t._v("辅助")]),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.hline"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"hline"}}),i("p",{staticClass:"glyphicon-class"},[t._v("横线")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.vline"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"vline"}}),i("p",{staticClass:"glyphicon-class"},[t._v("竖线")])],1)])])],1),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.rect"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"rect"}}),i("p",{staticClass:"glyphicon-class"},[t._v("矩形")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.oval"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"circle"}}),i("p",{staticClass:"glyphicon-class"},[t._v("圆形")])],1)])])],1),i("el-row",{staticClass:"drag_item_title"},[t._v("表单")]),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.barcode"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"barcode"}}),i("p",{staticClass:"glyphicon-class"},[t._v("条形码")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.qrcode"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"qrcode"}}),i("p",{staticClass:"glyphicon-class"},[t._v("二维码")])],1)])])],1),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.itemCode"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"itemcode"}}),i("p",{staticClass:"glyphicon-class"},[t._v("物料编码")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.itemName"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"itemname"}}),i("p",{staticClass:"glyphicon-class"},[t._v("物料名称")])],1)])])],1),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.workorderCode"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"workordercode"}}),i("p",{staticClass:"glyphicon-class"},[t._v("工单编号")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.workorderName"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"workordername"}}),i("p",{staticClass:"glyphicon-class"},[t._v("工单名称")])],1)])])],1),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.vendorCode"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"vendorcode"}}),i("p",{staticClass:"glyphicon-class"},[t._v("供应商编号")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.vendorName"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"vendorname"}}),i("p",{staticClass:"glyphicon-class"},[t._v("供应商名称")])],1)])])],1),i("el-row",{staticStyle:{height:"100px"}},[i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.clientCode"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"clientcode"}}),i("p",{staticClass:"glyphicon-class"},[t._v("客户编号")])],1)])]),i("el-col",{staticClass:"drag_item_box",attrs:{span:12}},[i("div",[i("a",{staticClass:"ep-draggable-item",attrs:{tid:"defaultModule.clientName"}},[i("svg-icon",{staticClass:"draggable-item-svg",attrs:{"icon-class":"clientname"}}),i("p",{staticClass:"glyphicon-class"},[t._v("客户名称")])],1)])])],1)],1)],1)],1)],1),i("el-col",{attrs:{span:16}},[i("el-card",{staticClass:"card-design"},[i("div",{staticClass:"hiprint-printTemplate",attrs:{id:"hiprint-printTemplate"}})])],1),i("el-col",{staticClass:"params_setting_container",attrs:{span:4}},[i("el-card",[i("el-row",{staticClass:"hinnn-layout-sider"},[i("div",{attrs:{id:"PrintElementOptionSetting"}})])],1)],1)],1),i("templatePreview",{ref:"preView",attrs:{id:"templateView"}})],1),i("el-dialog",{attrs:{title:t.title,visible:t.open,width:"960px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模板编号",prop:"templateCode"}},[i("el-input",{attrs:{placeholder:"请输入模板编号"},model:{value:t.form.templateCode,callback:function(e){t.$set(t.form,"templateCode",e)},expression:"form.templateCode"}})],1)],1),i("el-col",{attrs:{span:4}}),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"模板名称",prop:"templateName"}},[i("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.form.templateName,callback:function(e){t.$set(t.form,"templateName",e)},expression:"form.templateName"}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"模板类型",prop:"templateType"}},[i("el-select",{attrs:{placeholder:"请选择模板类型"},model:{value:t.form.templateType,callback:function(e){t.$set(t.form,"templateType",e)},expression:"form.templateType"}},[i("el-option",{attrs:{label:"请选择字典生成",value:""}})],1)],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"是否默认",prop:"isDefault"}},[i("el-input",{attrs:{placeholder:"请输入是否默认"},model:{value:t.form.isDefault,callback:function(e){t.$set(t.form,"isDefault",e)},expression:"form.isDefault"}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"启用状态",prop:"enableFlag"}},[i("el-input",{attrs:{placeholder:"请输入启用状态"},model:{value:t.form.enableFlag,callback:function(e){t.$set(t.form,"enableFlag",e)},expression:"form.enableFlag"}})],1)],1),i("el-col",{attrs:{span:4}}),i("el-col",{attrs:{span:12}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.saveTemplate}},[t._v("确 定")]),i("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},n=[],l=(i("2c66"),i("249d"),i("40e9"),i("e9f5"),i("f665"),i("7d54"),i("e9c4"),i("907a"),i("986a"),i("1d02"),i("3c5d"),i("6ce5"),i("2834"),i("4ea1"),i("5087"),i("61ae"),i("0a00"),i("b6f3"),i("4801"),i("0f64")),s=i("e493"),r=i("1d0c"),o=i("c415"),c=i("b719"),d=i("ab88"),p=i("388c"),u=i("c0e9"),g=i.n(u),m=i("1c83"),h=(i("fe63"),i("9d5b")),f=i("1ca4"),b=i("5c96");let v;var y={name:"printDesign",components:{templatePreview:o["default"]},data(){return{loading:!0,title:"",open:!1,hiprintThis:null,form:{templateId:this.$route.query.templateId,templateCode:null,templateType:null,templateName:null,templateJson:null,paperType:this.$route.query.paperType,templateWidth:null,templateHeight:null,templatePic:null,remark:null},rules:{templateCode:[{required:!0,message:"模板编号不能为空",trigger:"blur"}],templateType:[{required:!0,message:"模板类型不能为空",trigger:"change"}]},template:null,curPaper:{type:"A4",width:210,height:296.6},paperTypes:{A3:{width:420,height:296.6},A4:{width:210,height:296.6},A5:{width:210,height:147.6},B3:{width:500,height:352.6},B4:{width:250,height:352.6},B5:{width:250,height:175.6}},paperPopVisible:!1,paperWidth:"80",paperHeight:"60",scaleValue:1,scaleMax:5,scaleMin:.5,jsonIn:"",jsonOut:""}},computed:{curPaperType(){let t="other",e=this.paperTypes;for(const i in e){let a=e[i],{width:n,height:l}=this.curPaper;a.width===n&&a.height===l&&(t=i)}return t}},mounted(){this.init()},created(){if(null!=this.form.templateId&&""!=this.form.templateId){const t=this.form.templateId;Object(c["d"])(t).then(t=>{if(this.form=t.data,v)try{if("other"==this.form.paperType){const t={width:this.form.templateWidth,height:this.form.templateHeight};this.setPaper(this.form.paperType,t)}else this.setPaper(this.form.paperType);v.update(JSON.parse(this.form.templateJson))}catch(e){this.$message.error("更新失败: "+e)}})}},methods:{init(){l["hiprint"].init({providers:[m["default"]],host:f["a"].print_transfer_url,token:f["a"].print_transfer_token}),this.hiprintThis=l["hiprint"],l["hiprint"].setConfig(),l["hiprint"].setConfig({optionItems:[d["default"],p["default"],function(){function t(){this.name="zIndex"}return t.prototype.css=function(t,e){return t&&t.length&&e?t.css("z-index",e):null},t.prototype.createTarget=function(){return this.target=$('<div class="hiprint-option-item">\n        <div class="hiprint-option-item-label">\n        元素层级2\n        </div>\n        <div class="hiprint-option-item-field">\n        <input type="number" class="auto-submit"/>\n        </div>\n    </div>'),this.target},t.prototype.getValue=function(){var t=this.target.find("input").val();if(t)return parseInt(t.toString())},t.prototype.setValue=function(t){this.target.find("input").val(t)},t.prototype.destroy=function(){this.target.remove()},t}()],movingDistance:2.5,text:{tabs:[{options:[]},{name:"样式",options:[{name:"scale",after:"transform",hidden:!1}]}],supportOptions:[{name:"styler",hidden:!0},{name:"scale",after:"transform",hidden:!1},{name:"formatter",hidden:!0}]},image:{tabs:[{replace:!0,name:"基本",options:[{name:"field",hidden:!1},{name:"src",hidden:!1},{name:"fit",hidden:!1}]}]}}),l["hiprint"].PrintElementTypeManager.buildByHtml($(".ep-draggable-item")),$("#hiprint-printTemplate").empty();this.template=v=new l["hiprint"].PrintTemplate({template:s["default"],onImageChooseClick:t=>{setTimeout(()=>{t.refresh("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAtAAAAIIAQMAAAB99EudAAAABlBMVEUmf8vG2O41LStnAAABD0lEQVR42u3XQQqCQBSAYcWFS4/QUTpaHa2jdISWLUJjjMpclJoPGvq+1WsYfiJCZ4oCAAAAAAAAAAAAAAAAAHin6pL9c6H/fOzHbRrP0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0u/SY9LS0tLS0tLS0tLS0n+edm+UlpaWlpaWlpaWlpaW/tl0Ndyzbno7/+tPTJdd1wal69dNa6abx+Lq6TSeYtK7BX/Diek0XULSZZrakPRtV0i6Hu/KIt30q4fM0pvBqvR9mvsQkZaW9gyJT+f5lsnzjR54xAk8mAUeJyMPwYFH98ALx5Jr0kRLLndT7b64UX9QR/0eAAAAAAAAAAAAAAAAAAD/4gpryzr/bja4QgAAAABJRU5ErkJggg==",{real:!0})},3e3)},fontList:[{title:"微软雅黑",value:"Microsoft YaHei"},{title:"黑体",value:"STHeitiSC-Light"},{title:"思源黑体",value:"SourceHanSansCN-Normal"},{title:"王羲之书法体",value:"王羲之书法体"},{title:"宋体",value:"SimSun"},{title:"华为楷体",value:"STKaiti"},{title:"cursive",value:"cursive"}],dataMode:1,history:!0,onDataChanged:(t,e)=>{console.log(t),console.log(e)},onUpdateError:t=>{console.log(t)},settingContainer:"#PrintElementOptionSetting",paginationContainer:".hiprint-printPagination"}),v.design("#hiprint-printTemplate",{grid:!0}),console.log(v),this.scaleValue=v.editingPanel.scale||1},setPaper(t,e){try{this.form.paperType=t,Object.keys(this.paperTypes).includes(t)?(this.curPaper={type:t,width:this.paperTypes[t].width,height:this.paperTypes[t].height},v.setPaper(this.paperTypes[t].width,this.paperTypes[t].height),this.form.templateWidth=this.paperTypes[t].width,this.form.templateHeight=this.paperTypes[t].height):(this.curPaper={type:"other",width:e.width,height:e.height},v.setPaper(e.width,e.height),this.form.templateWidth=e.width,this.form.templateHeight=e.height);const i=this.form.templateHeight*this.form.templateWidth;let a=this.scaleValue;a=i<3e4?Math.floor(250/this.form.templateWidth):1,v&&(v.zoom(a),this.scaleValue=a)}catch(i){this.$message.error("操作失败: "+i)}},otherPaper(){let t={};t.width=this.paperWidth,t.height=this.paperHeight,this.paperPopVisible=!1,this.setPaper("other",t)},changeScale(t){let e=this.scaleValue;t?(e+=.1,e>this.scaleMax&&(e=5)):(e-=.1,e<this.scaleMin&&(e=.5)),v&&(v.zoom(e),this.scaleValue=e)},rotatePaper(){v&&v.rotatePaper()},preView(){let{width:t}=this.curPaper;this.$refs.preView.show(v,r["default"],t)},handleSave(){null!=this.form.templateId?this.saveTemplate():(this.open=!0,this.title="新增打印模板配置")},saveTemplate(){let t=this;v&&(this.form.templateJson=JSON.stringify(v.getJson())),g()(document.getElementById("hiprint-printTemplate")).then((function(e){e.toBlob(e=>{let i=(new Date).getTime()+".jpg",a=new File([e],i,{type:"image/jpg"}),n=new FormData;n.append("file",a),Object(c["g"])(n).then(e=>{"200"==e.code&&(t.form.templatePic=e.url),null!=t.form.templateId?Object(c["f"])(t.form).then(e=>{t.$modal.msgSuccess("修改成功")}):Object(c["a"])(t.form).then(e=>{t.$modal.msgSuccess("新增成功")})})},"img/png")}))},printText(){},onlyPrint2(){let t=this;if(window.hiwebSocket.opened){let e=this.$print2(void 0,s["default"],r["default"],{printer:"",title:"Api单独打印",styleHandler:()=>{let t="<style>.hiprint-printElement-text{color:red !important;}</style>";return t}}),i="Api单独直接打印";e.on("printSuccess",(function(){t.$notification.success({key:i,placement:"topRight",message:i+" 打印成功",description:"Api单独直接打印回调"})}))}else this.$message.error("客户端未连接,无法直接打印")},print(){const t=JSON.parse(localStorage.getItem("defaultClient")),e=Object.entries(this.hiprintThis.hiwebSocket.clients);let i="";e.forEach(e=>{t.clientIp==e[1].ip&&(i=e[0])}),i?Object(h["c"])(t.clientId).then(t=>{200==t.code&&(v.print2({},{client:i,printer:t.data.printerName,title:"hiprint测试打印"}),b["Message"].success("打印成功"))}).catch(t=>{}):b["Message"].error("客户端未连接,无法直接打印")},clearPaper(){try{v.clear()}catch(t){this.$message.error("操作失败: "+t)}},ippPrintAttr(){const t=v.getPrinterList();if(console.log(t),!t.length)return;let e=t[0];console.log(e);let i=e.options["printer-uri-supported"];l["hiprint"].ippPrint({url:i,opt:{},action:"Get-Printer-Attributes",message:null},t=>{console.log(t)},t=>{console.log(t)})},ippPrintTest(){const t=v.getPrinterList();if(console.log(t),!t.length)return;let e=t[0];console.log(e);let i=e.options["printer-uri-supported"];l["hiprint"].ippPrint({url:i,opt:{},action:"Print-Job",message:{"operation-attributes-tag":{"requesting-user-name":"hiPrint","job-name":"ipp Test Job","document-format":"text/plain"},data:"test test test test test test test",encoding:"utf-8"}},t=>{console.log(t)},t=>{console.log(t)})},ippRequestTest(){const t=v.getPrinterList();if(console.log(t),!t.length)return;let e=t[0];console.log(e);let i=e.options["printer-uri-supported"];l["hiprint"].ippRequest({url:i,data:{operation:"Get-Printer-Attributes","operation-attributes-tag":{"attributes-charset":"utf-8","attributes-natural-language":"zh-cn","printer-uri":i}}},t=>{console.log(t)})},ippRequestPrint(){const t=v.getPrinterList();if(console.log(t),!t.length)return;let e=t[0];console.log(e);let i=e.options["printer-uri-supported"],a="ippRequestPrint ippRequestPrint ippRequestPrint",n=new Uint8Array(a.length);for(var s=0;s<a.length;s++)n[s]=a.charCodeAt(s);let r=n.buffer;l["hiprint"].ippRequest({url:i,data:{operation:"Print-Job","operation-attributes-tag":{"attributes-charset":"utf-8","attributes-natural-language":"zh-cn","printer-uri":i,"requesting-user-name":"hiPrint","job-name":"ipp Request Job","document-format":"text/plain"},data:r}},t=>{console.log(t)})},updateJson(){if(v)try{v.update(JSON.parse(this.jsonIn))}catch(t){this.$message.error("更新失败: "+t)}},exportJson(){v&&(this.jsonOut=JSON.stringify(v.getJson()||{}))},setElsAlign(t){v.setElsAlign(t)},setElsSpace(t){v.setElsSpace(10,t)},getSelectEls(){let t=v.getSelectEls();console.log(t)},updateFontSize(){v.updateOption("fontSize",12)},updateFontWeight(){v.updateOption("fontWeight","bolder")},cancel(){this.open=!1}}},C=y,x=(i("aa69"),i("2877")),w=Object(x["a"])(C,a,n,!1,null,"68fa3b4b",null);e["default"]=w.exports},"1c83":function(t,e,i){"use strict";i.r(e),i.d(e,"aProvider",(function(){return n}));var a=i("0f64");const n=function(t){var e=function(t){t.removePrintElementTypes("defaultModule"),t.addPrintElementTypes("defaultModule",[new a["hiprint"].PrintElementTypeGroup("平台",[{tid:"defaultModule.text",title:"固定文本",data:"固定文本",type:"text",options:{type:"text",testData:"",height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.image",title:"",data:"",type:"image"},{tid:"defaultModule.longText",title:"长文本",data:"长文本",type:"longText",options:{type:"text",testData:"",height:12,fontSize:6.75,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.date",title:"",data:"2020-01-01",type:"text",options:{type:"date",field:"date",testData:"2020-01-01",height:16,fontSize:6.75,fontWeight:"700",textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.hline",title:"横线",type:"hline",options:{width:90,height:9}},{tid:"defaultModule.vline",title:"竖线",type:"vline",options:{width:9,height:90}},{tid:"defaultModule.rect",title:"矩形",type:"rect",options:{width:66,height:42}},{tid:"defaultModule.oval",title:"椭圆",type:"oval",options:{width:60,height:60}},{tid:"defaultModule.barcode",title:"条形码",data:"",type:"text",options:{type:"barcode",field:"barcode",testData:"test",height:32,fontSize:12,lineHeight:18,textType:"barcode"}},{tid:"defaultModule.qrcode",title:"二维码",data:"",type:"text",options:{type:"qrcode",field:"barcodeContent",testData:"test",height:40,width:40,fontSize:12,lineHeight:18,hideTitle:!0,textType:"qrcode"}},{tid:"defaultModule.itemCode",title:"物料编码",data:"",type:"text",options:{testData:"IF2022082437",height:12,field:"itemCode",hideTitle:!0,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.itemName",title:"物料名称",data:"",type:"text",options:{testData:"色粉【黑色】",field:"itemName",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.workorderCode",title:"工单编码",data:"",type:"text",options:{testData:"MO202503180014",field:"workorderCode",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.workorderName",title:"工单名称",data:"",type:"text",options:{testData:"螺丝刀刀头【10000】PCS",field:"workorderName",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.vendorCode",title:"供应商编码",data:"",type:"text",options:{testData:"V00009",field:"vendorCode",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.vendorName",title:"供应商名称",data:"",type:"text",options:{testData:"江苏南通塑有为塑料制品有限公司",field:"vendorName",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.clientCode",title:"客户编码",data:"",type:"text",options:{testData:"C00184",field:"clientCode",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}},{tid:"defaultModule.clientName",title:"客户名称",data:"",type:"text",options:{testData:"比亚迪股份有限公司",field:"clientName",hideTitle:!0,height:12,fontSize:6.75,width:61.5,textAlign:"left",textContentVerticalAlign:"middle"}}])])};return{addElementTypes:e}};e["default"]=n()},"1d0c":function(t,e,i){"use strict";i.r(e),e["default"]={name:"黄磊",logoTest:"https://portrait.gitee.com/uploads/avatars/user/1800/5400665_CcSimple_1591166830.png!avatar60",password:"12346",longText:"浙江在线3月29日讯最近，\n一篇小学五年级学生写的作文引起了钱报记者的关注这篇作文的题目叫做《脏话风波》，讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文《脏话风波》浙江在线3月29日讯最近，一篇小学五年级学生写的作文引起了钱报记者的关注。这篇作文的题目叫做《脏话风波》，讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文《脏话风波》浙江在线3月29日讯最近，一篇小学五年级学生写的作文引起了钱报记者的关注。这篇作文的题目叫做《脏话风波》，讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文《脏话风波》浙江在线3月29日讯最近，一篇小学五年级学生写的作文引起了钱报记者的关注。这篇作文的题目叫做《脏话风波》，讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文《脏话风波》浙江在线3月29日讯最近，一篇小学五年级学生写的作文引起了钱报记者的关注。这篇作文的题目叫做《脏话风波》，讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文讲述的是小作者班级里发生的一种不文明现象——讲脏话的同学越来越多，有的人说话甚至句句“带把儿”。班主任为了遏制这种现象，煞费苦心想了很多办法，跟学生斗智斗勇……看到这篇作文，记者突然想到，自己读六年级的儿子有天突然冒出一句脏话。此前，他是从不说脏话的。问他怎么学会的，他也说不出个所以然来。于是，记者做了这个小学生脏话现象调查。经过了解才发现，小学生爱说脏话竟然较为普遍，一般三年级会冒出苗头。无论是学习成绩好的，还是平时不太起眼的，都会说脏话。而且，说脏话会“传染”，一旦冒头不制止，到了五六年级甚至可能在班里大爆发。以下为作文",table:[{id:"1",name:"王小可",gender:"男",count:"120",amount:"9089元"},{id:"2",name:"梦之遥",gender:"女",count:"20",amount:"89元"},{id:"3",name:"梦之遥",gender:"女",count:"720",amount:"29089元"},{id:"4",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"5",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"6",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"7",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"8",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"9",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"10",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"11",name:"王小可",gender:"男",count:"120",amount:"9089元"},{id:"12",name:"梦之遥",gender:"女",count:"20",amount:"89元"},{id:"13",name:"梦之遥",gender:"女",count:"720",amount:"29089元"},{id:"14",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"15",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"16",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"17",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"18",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"19",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"20",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"21",name:"王小可",gender:"男",count:"120",amount:"9089元"},{id:"22",name:"梦之遥",gender:"女",count:"20",amount:"89元"},{id:"23",name:"梦之遥",gender:"女",count:"720",amount:"29089元"},{id:"24",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"25",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"26",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"27",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"28",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"29",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"21",name:"王小可",gender:"男",count:"120",amount:"9089元"},{id:"22",name:"梦之遥",gender:"女",count:"20",amount:"89元"},{id:"23",name:"梦之遥",gender:"女",count:"720",amount:"29089元"},{id:"24",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"25",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"26",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"27",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"28",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"29",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"21",name:"王小可",gender:"男",count:"120",amount:"9089元"},{id:"22",name:"梦之遥",gender:"女",count:"20",amount:"89元"},{id:"23",name:"梦之遥",gender:"女",count:"720",amount:"29089元"},{id:"29",name:"黄小菊",gender:"女",count:"420",amount:"19089元"},{id:"30",name:"黄小菊",gender:"女",count:"420",amount:"19089元"}]}},2440:function(t,e,i){"use strict";i("91bd")},"388c":function(t,e,i){"use strict";i.r(e);i("e9f5"),i("f665");e["default"]=function(){function t(){this.name="scale"}return t.prototype.css=function(t,e){return t&&t.length&&e?t.css("transform","scale("+e+")"):null},t.prototype.createTarget=function(t,e,i){return this.target=$('<div class="hiprint-option-item">\n        <div class="hiprint-option-item-label">\n        缩放\n        </div>\n        <div class="hiprint-option-item-field">\n        <input type="number" value="1" step="0.1" min="0.1" max="3" class="auto-submit"/>\n        </div>\n    </div>'),this.target},t.prototype.getValue=function(){var t=this.target.find("input").val();if(t)return parseFloat(t.toString())},t.prototype.setValue=function(t){this.target.find("input").val(t)},t.prototype.destroy=function(){this.target.remove()},t}()},"91bd":function(t,e,i){},"9d5b":function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"d",(function(){return l})),i.d(e,"a",(function(){return s})),i.d(e,"g",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"f",(function(){return c})),i.d(e,"c",(function(){return d}));var a=i("b775");function n(t){return Object(a["a"])({url:"/print/printerconfig/list",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/print/printerconfig/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/print/printerconfig",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/print/printerconfig",method:"put",data:t})}function o(t){return Object(a["a"])({url:"/print/printerconfig/"+t,method:"delete"})}function c(t){return Object(a["a"])({url:"/print/printerconfig/editDefaultPrint/",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/print/printerconfig/getDefaultPrint/"+t,method:"get"})}},aa69:function(t,e,i){"use strict";i("c12e")},ab88:function(t,e,i){"use strict";i.r(e);i("e9f5"),i("f665");e["default"]=function(){function t(){this.name="fontSize"}return t.prototype.css=function(t,e){if(t&&t.length){if(e)return t.css("font-size",e+"pt"),"font-size:"+e+"pt";t[0].style.fontSize=""}return null},t.prototype.createTarget=function(){let t=[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72],e='\n            <option value="" >默认</option>';return t.forEach((function(t){e+='\n            <option value="'+t+'">'+t+"pt</option>"})),this.target=$(' <div class="hiprint-option-item">\n        <div class="hiprint-option-item-label">\n        字体大小\n        </div>\n        <div class="hiprint-option-item-field">\n        <select class="auto-submit">        </select>\n        </div>\n    </div>'),this.target.find(".auto-submit").append($(e)),this.target},t.prototype.getValue=function(){var t=this.target.find("select").val();if(t)return parseFloat(t.toString())},t.prototype.setValue=function(t){t&&(this.target.find('option[value="'+t+'"]').length||this.target.find("select").prepend('<option value="'+t+'" >'+t+"</option>")),this.target.find("select").val(t)},t.prototype.destroy=function(){this.target.remove()},t}()},b719:function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"d",(function(){return l})),i.d(e,"a",(function(){return s})),i.d(e,"f",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"g",(function(){return c})),i.d(e,"c",(function(){return d}));var a=i("b775");function n(t){return Object(a["a"])({url:"/print/template/list",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/print/template/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/print/template",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/print/template",method:"put",data:t})}function o(t){return Object(a["a"])({url:"/print/template/"+t,method:"delete"})}function c(t){return Object(a["a"])({url:"/common/uploadMinio",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/print/template/templateType/"+t,method:"get"})}},c12e:function(t,e,i){},c415:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.visible,title:"模板预览","show-close":"","close-on-click-modal":"",width:t.width+20+"mm"},on:{close:t.hideModal}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isMultiPanel,expression:"isMultiPanel"}],staticStyle:{margin:"14px 0 0 10px"},attrs:{id:"template-preview-printPagination"}}),i("el-card",{staticClass:"card-design"},[i("div",{attrs:{id:"preview_content_design"}})]),i("template",{slot:"title"},[i("div",[i("div",{staticStyle:{"margin-right":"20px"}},[t._v("模板预览")])])]),i("template",{slot:"footer"},[i("el-button",{key:"close",attrs:{type:"info"},on:{click:t.hideModal}},[t._v(" 关闭 ")])],1)],2)},n=[],l=i("0f64");var s={name:"templatePreview",data(){return{visible:!1,spinning:!0,waitShowPrinter:!1,template:null,isMultiPanel:!0,hiprintTemplate:{},width:0,name:"名称",json:{},printData:{},extendCss:""}},methods:{hideModal(){this.visible=!1,$("link[media=print]").empty()},show(t,e,i="210"){this.visible=!0,this.spinning=!0,this.width=t.editingPanel?t.editingPanel.width:i,this.hiprintTemplate=t,this.printData=e,setTimeout(()=>{$("#preview_content_design").html(t.getHtml(e)),this.spinning=!1},500)},print(){let t=this;this.waitShowPrinter=!0,this.hiprintTemplate.print(this.printData,{},{callback:()=>{this.waitShowPrinter=!1},styleHandler:()=>t.extendCss})},toPdf(){let t=this;this.hiprintTemplate.toPdf(this.printData,this.name,{styleHandler:()=>t.extendCss})},print2(){if(l["hiprint"].hiwebSocket.opened){let t=this;this.hiprintTemplate.print2(this.printData,{printer:"",title:this.name,styleHandler:()=>t.extendCss})}else this.$message.error("请先连接直接打印客户端")}}},r=s,o=(i("2440"),i("2877")),c=Object(o["a"])(r,a,n,!1,null,"da9ee04c",null);e["default"]=c.exports},e493:function(t,e,i){"use strict";i.r(e),e["default"]={panels:[{index:0,height:297,width:210,paperHeader:0,paperFooter:0,printElements:[],paperNumberDisabled:!0}]}},fe63:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));i("e9f5"),i("7d54"),i("5087");var a=i("5c96"),n=i("9d5b");function l(t,e,i,l){if(i)try{i.update(JSON.parse(t));const s=JSON.parse(localStorage.getItem("defaultClient")),r=Object.entries(l.hiwebSocket.clients);let o="";r.forEach(t=>{s.clientIp==t[1].ip&&(o=t[0])}),o?Object(n["c"])(s.clientId).then(t=>{200==t.code&&(i.print2(e,{client:o,printer:t.data.printerName,title:"hiprint测试打印"}),a["Message"].success("打印成功"))}).catch(t=>{}):a["Message"].error("客户端未连接,无法直接打印")}catch(s){a["Message"].error("更新失败: "+s)}}}}]);