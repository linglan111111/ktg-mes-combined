(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2095bc"],{a95c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"检验单编号",prop:"iqcCode"}},[a("el-input",{attrs:{placeholder:"请输入来料检验单编号"},model:{value:e.form.iqcCode,callback:function(t){e.$set(e.form,"iqcCode",t)},expression:"form.iqcCode"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"80"}},["view"!=e.optType&&"PREPARE"==e.form.status?a("el-switch",{attrs:{"active-color":"#13ce66","active-text":"自动生成"},on:{change:function(t){return e.handleAutoGenChange(e.autoGenFlag)}},model:{value:e.autoGenFlag,callback:function(t){e.autoGenFlag=t},expression:"autoGenFlag"}}):e._e()],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"检验单名称",prop:"iqcName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.iqcName,callback:function(t){e.$set(e.form,"iqcName",t)},expression:"form.iqcName"}})],1)],1),a("el-col",{attrs:{span:3,align:"middle"}},["ACCEPT"==e.form.checkResult?a("el-image",{attrs:{fit:"contain",src:e.acceptImg}}):"REJECT"==e.form.checkResult?a("el-image",{attrs:{fit:"contain",src:e.rejectImg}}):a("el-image",{attrs:{fit:"contain",src:e.prepareImg}})],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品物料编码",prop:"itemCode"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.itemCode,callback:function(t){e.$set(e.form,"itemCode",t)},expression:"form.itemCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品物料名称",prop:"itemName"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.itemName,callback:function(t){e.$set(e.form,"itemName",t)},expression:"form.itemName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位",prop:"unitName"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.unitName,callback:function(t){e.$set(e.form,"unitName",t)},expression:"form.unitName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供应商编码",prop:"vendorCode"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.vendorCode,callback:function(t){e.$set(e.form,"vendorCode",t)},expression:"form.vendorCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供应商简称",prop:"vendorNick"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.vendorNick,callback:function(t){e.$set(e.form,"vendorNick",t)},expression:"form.vendorNick"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供应商批次号",prop:"vendorBatch"}},[a("el-input",{attrs:{placeholder:"请输入供应商批次号"},model:{value:e.form.vendorBatch,callback:function(t){e.$set(e.form,"vendorBatch",t)},expression:"form.vendorBatch"}})],1)],1)],1),a("el-divider",{attrs:{"content-position":"center"}},[e._v("检测情况")]),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"本次接收数量",prop:"quantityRecived"}},[a("el-input-number",{attrs:{min:1,placeholder:"请输入本次接收数量"},model:{value:e.form.quantityRecived,callback:function(t){e.$set(e.form,"quantityRecived",t)},expression:"form.quantityRecived"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合格品数量",prop:"quantityQualified"}},[a("el-input-number",{attrs:{min:0,placeholder:"请输入合格品数量"},model:{value:e.form.quantityQualified,callback:function(t){e.$set(e.form,"quantityQualified",t)},expression:"form.quantityQualified"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不合格数量",prop:"quantityUnqualified"}},[a("el-input-number",{attrs:{min:0,placeholder:"请输入不合格数"},model:{value:e.form.quantityUnqualified,callback:function(t){e.$set(e.form,"quantityUnqualified",t)},expression:"form.quantityUnqualified"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来料日期",prop:"reciveDate"}},[a("el-date-picker",{attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择来料日期"},model:{value:e.form.reciveDate,callback:function(t){e.$set(e.form,"reciveDate",t)},expression:"form.reciveDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"检测日期",prop:"inspectDate"}},[a("el-date-picker",{attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择检测日期"},model:{value:e.form.inspectDate,callback:function(t){e.$set(e.form,"inspectDate",t)},expression:"form.inspectDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"检测结果",prop:"checkResult"}},[a("el-select",{attrs:{placeholder:"请选择检测结果"},model:{value:e.form.checkResult,callback:function(t){e.$set(e.form,"checkResult",t)},expression:"form.checkResult"}},e._l(e.dict.type.mes_qc_result,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{title:"缺陷情况"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"致命缺陷率",prop:"crRate"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.crRate,callback:function(t){e.$set(e.form,"crRate",t)},expression:"form.crRate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"严重缺陷率",prop:"majRate"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.majRate,callback:function(t){e.$set(e.form,"majRate",t)},expression:"form.majRate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"轻微缺陷率",prop:"minRate"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.minRate,callback:function(t){e.$set(e.form,"minRate",t)},expression:"form.minRate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"致命缺陷数量",prop:"crQuantity"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.crQuantity,callback:function(t){e.$set(e.form,"crQuantity",t)},expression:"form.crQuantity"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"严重缺陷数量",prop:"majQuantity"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.majQuantity,callback:function(t){e.$set(e.form,"majQuantity",t)},expression:"form.majQuantity"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"轻微缺陷数量",prop:"minQuantity"}},[a("el-input",{attrs:{readonly:"readonly"},model:{value:e.form.minQuantity,callback:function(t){e.$set(e.form,"minQuantity",t)},expression:"form.minQuantity"}})],1)],1)],1)],1)],1),null!=e.form.iqcId?a("el-divider",{attrs:{"content-position":"center"}},[e._v("检测项")]):e._e(),null!=e.form.iqcId?a("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[a("IqcLine",{ref:"line",attrs:{iqcId:e.form.iqcId,optType:e.optType}})],1):e._e()],1),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{staticStyle:{"text-align":"center","margin-left":"-120px","margin-top":"30px"}},["PREPARE"!=e.form.status?a("el-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("返回")]):e._e(),"PREPARE"==e.form.status?a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保 存")]):e._e(),"PREPARE"==e.form.status&&null!=e.form.iqcId?a("el-button",{attrs:{type:"success"},on:{click:e.handleFinish}},[e._v("完成")]):e._e(),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},l=[],o=a("a3ca"),i=a("25fa"),n=a("135d"),s=a("e838"),c=a("8171"),m={name:"pendingIqc",components:{ItemSelect:i["a"],VendorSelect:n["a"],IqcLine:s["default"]},dicts:["mes_ipqc_type","mes_qc_result","mes_order_status"],data(){return{autoGenFlag:!1,optType:"add",acceptImg:a("63a2"),rejectImg:a("441c"),prepareImg:a("9732"),form:{},rules:{iqcCode:[{required:!0,message:"请输入检验单编号",trigger:"blur"}],iqcName:[{required:!0,message:"请输入检验单名称",trigger:"blur"}],workorderCode:[{required:!0,message:"请选择生产工单",trigger:"blur"}],checkResult:[{required:!0,message:"请选择检测结果",trigger:"blur"}],quantityUnqualified:[{required:!0,message:"不合格品数量不能为空",trigger:"blur"}],quantityQualified:[{required:!0,message:"合格品数量不能为空",trigger:"blur"}]}}},created(){this.reset()},methods:{cancel(){const e={path:"/mes/qc/pendinginspect"};this.$tab.closeOpenPage(e)},reset(){this.form={iqcId:null,iqcCode:null,iqcName:"到货通知单【"+this.$route.params.sourceDocCode+"】检验单",templateId:null,sourceDocId:this.$route.params.sourceDocId,sourceDocType:this.$route.params.sourceDocType,sourceDocCode:this.$route.params.sourceDocCode,sourceLineId:this.$route.params.sourceLineId,vendorId:this.$route.params.vendorClientId,vendorCode:this.$route.params.vendorClientCode,vendorName:this.$route.params.vendorClientName,vendorNick:this.$route.params.vendorClientNick,vendorBatch:this.$route.params.batchCode,itemId:this.$route.params.itemId,itemCode:this.$route.params.itemCode,itemName:this.$route.params.itemName,specification:this.$route.params.specification,unitOfMeasure:this.$route.params.unitOfMeasure,unitName:this.$route.params.unitName,quantityMinCheck:null,quantityMaxUnqualified:null,quantityRecived:this.$route.params.quantityCheck,quantityCheck:this.$route.params.quantityCheck,quantityQualified:null,quantityUnqualified:null,crRate:null,majRate:null,minRate:null,crQuantity:null,majQuantity:null,minQuantity:null,checkResult:null,reciveDate:this.$route.params.recordTime,inspectDate:new Date,inspector:null,status:"PREPARE",remark:null,attr1:null,attr2:null,attr3:null,attr4:null,createBy:null,createTime:null,updateBy:null,updateTime:null},this.autoGenFlag=!1,this.resetForm("form")},submitForm(){this.$refs["form"].validate(e=>{e&&(null!=this.form.iqcId?Object(o["e"])(this.form).then(e=>{this.$modal.msgSuccess("修改成功")}):Object(o["a"])(this.form).then(e=>{this.$modal.msgSuccess("新增成功"),this.form.iqcId=e.data}))})},handleFinish(){let e=this;null!=this.form.checkResult?this.$refs["form"].validate(t=>{t&&this.$modal.confirm("是否完成来料检验单编制？【完成后将不能更改】").then((function(){e.form.status="FINISHED",e.submitForm(),e.cancel()}))}):this.$modal.msgError("请选择检测结果！")},handleAutoGenChange(e){e?Object(c["c"])("QC_IQC_CODE").then(e=>{this.form.iqcCode=e}):this.form.iqcCode=null}}},u=m,p=a("2877"),d=Object(p["a"])(u,r,l,!1,null,null,null);t["default"]=d.exports}}]);